<script>
    document.addEventListener("DOMContentLoaded", function () {
        let fileInput = document.getElementById("fileInput");
        let fileNameDisplay = document.getElementById("fileName");

        // Update filename when a file is selected
        fileInput.addEventListener("change", function () {
            let fileName = fileInput.files.length > 0 ? fileInput.files[0].name : "No file chosen";
            fileNameDisplay.textContent = fileName; // Update the filename display
        });

        // Handle file upload
        document.getElementById("uploadForm").addEventListener("submit", async function (event) {
            event.preventDefault();

            if (!fileInput.files.length) {
                fileNameDisplay.textContent = "‚ùå Please select a file first!";
                return;
            }

            let formData = new FormData();
            formData.append("file", fileInput.files[0]);

            try {
                let response = await fetch("http://172.31.128.10:8080", {
                    method: "POST",
                    body: formData
                });

                let result = await response.json();

                if (result.message) {
                    document.getElementById("status").innerHTML = `‚úÖ Uploaded: <b>${result.filename}</b><br>üîó Hash: <b>${result.hash}</b>`;
                } else {
                    document.getElementById("status").textContent = "‚ùå Upload failed!";
                }
            } catch (error) {
                document.getElementById("status").textContent = "‚ùå Server error!";
            }
        });
    });
</script>